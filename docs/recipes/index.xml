<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Recipes &amp; Examples on Entra Auth Cli Documentation</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/</link><description>Recent content in Recipes &amp; Examples on Entra Auth Cli Documentation</description><generator>Hugo</generator><language>en-us</language><atom:link href="https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/index.xml" rel="self" type="application/rss+xml"/><item><title>Microsoft Graph API</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/microsoft-graph/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/microsoft-graph/</guid><description>&lt;h1 id="microsoft-graph-api"&gt;Microsoft Graph API &lt;a href="#microsoft-graph-api" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to use Entra Auth Cli to authenticate and interact with Microsoft Graph API.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="overview"&gt;Overview &lt;a href="#overview" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Microsoft Graph is the unified API for Microsoft 365, providing access to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Users and groups&lt;/li&gt;
&lt;li&gt;Mail and calendars&lt;/li&gt;
&lt;li&gt;Files (OneDrive/SharePoint)&lt;/li&gt;
&lt;li&gt;Teams and collaboration&lt;/li&gt;
&lt;li&gt;Security and compliance&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Base URL:&lt;/strong&gt; &lt;code&gt;https://graph.microsoft.com/v1.0/&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="quick-start"&gt;Quick Start &lt;a href="#quick-start" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="setup-profile"&gt;Setup Profile &lt;a href="#setup-profile" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="35c905d" class="language-bash line-numbers"&gt;
 &lt;code&gt;entra-auth-cli config create
# Name: graph-readonly
# Client ID: &amp;lt;your-app-id&amp;gt;
# Tenant ID: &amp;lt;your-tenant-id&amp;gt;
# Scope: https://graph.microsoft.com/User.Read&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;h3 id="get-token-and-call-api"&gt;Get Token and Call API &lt;a href="#get-token-and-call-api" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="e161c25" class="language-bash line-numbers"&gt;
 &lt;code&gt;TOKEN=$(entra-auth-cli get-token -p graph-readonly )
curl -H &amp;#34;Authorization: Bearer $TOKEN&amp;#34; \
 https://graph.microsoft.com/v1.0/me | jq&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="read-user-profile"&gt;Read User Profile &lt;a href="#read-user-profile" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Retrieve information about the authenticated user.&lt;/p&gt;</description></item><item><title>Azure Management API</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/azure-management/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/azure-management/</guid><description>&lt;h1 id="azure-management-api"&gt;Azure Management API &lt;a href="#azure-management-api" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to use Entra Auth Cli to authenticate and manage Azure resources.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="overview"&gt;Overview &lt;a href="#overview" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The Azure Management API provides programmatic access to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Subscriptions and resource groups&lt;/li&gt;
&lt;li&gt;Virtual machines and networking&lt;/li&gt;
&lt;li&gt;Storage accounts and databases&lt;/li&gt;
&lt;li&gt;Azure services configuration&lt;/li&gt;
&lt;li&gt;Resource provisioning and monitoring&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Base URL:&lt;/strong&gt; &lt;code&gt;https://management.azure.com/&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="quick-start"&gt;Quick Start &lt;a href="#quick-start" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="setup-profile"&gt;Setup Profile &lt;a href="#setup-profile" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="4cdb216" class="language-bash line-numbers"&gt;
 &lt;code&gt;entra-auth-cli config create
# Name: azure-mgmt
# Client ID: &amp;lt;your-app-id&amp;gt;
# Tenant ID: &amp;lt;your-tenant-id&amp;gt;
# Scope: https://management.azure.com/.default&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;h3 id="get-token-and-call-api"&gt;Get Token and Call API &lt;a href="#get-token-and-call-api" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="8341386" class="language-bash line-numbers"&gt;
 &lt;code&gt;TOKEN=$(entra-auth-cli get-token -p azure-mgmt )
curl -H &amp;#34;Authorization: Bearer $TOKEN&amp;#34; \
 &amp;#39;https://management.azure.com/subscriptions?api-version=2020-01-01&amp;#39; | jq&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="list-subscriptions"&gt;List Subscriptions &lt;a href="#list-subscriptions" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Retrieve all Azure subscriptions.&lt;/p&gt;</description></item><item><title>CI/CD Integration</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/cicd-integration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/cicd-integration/</guid><description>&lt;h1 id="cicd-integration"&gt;CI/CD Integration &lt;a href="#cicd-integration" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to integrate Entra Auth Cli into your CI/CD pipelines for automated authentication.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;⚠️ Important Note on CI/CD Usage:&lt;/strong&gt;&lt;br&gt;
The &lt;code&gt;entra-auth-cli config create&lt;/code&gt; command is &lt;strong&gt;fully interactive&lt;/strong&gt; and cannot accept credentials via command-line flags. For CI/CD scenarios, you have two options:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Export profiles locally&lt;/strong&gt; and import them in CI/CD (using encrypted files with passphrases stored as secrets)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Use direct get-token&lt;/strong&gt; with profiles created ahead of time and secrets managed via secure storage&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The examples below show both approaches.&lt;/p&gt;</description></item><item><title>Bash Scripting</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/bash-scripts/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/bash-scripts/</guid><description>&lt;h1 id="bash-scripting"&gt;Bash Scripting &lt;a href="#bash-scripting" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to use Entra Auth Cli in Bash scripts with proper error handling, caching, and best practices.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="token-caching"&gt;Token Caching &lt;a href="#token-caching" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Implement token caching to improve performance and reduce authentication requests.&lt;/p&gt;



 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="38cd790" class="language-bash line-numbers"&gt;
 &lt;code&gt;#!/bin/bash
set -euo pipefail

TOKEN_CACHE=&amp;#34;/tmp/entra-auth-cli-token-cache.txt&amp;#34;
TOKEN_MAX_AGE=3000 # 50 minutes

get_token() {
 local profile=$1
 
 # Check if cached token exists and is valid
 if [ -f &amp;#34;$TOKEN_CACHE&amp;#34; ]; then
 if entra-auth-cli inspect - &amp;lt; &amp;#34;$TOKEN_CACHE&amp;#34; &amp;amp;&amp;gt;/dev/null; then
 cat &amp;#34;$TOKEN_CACHE&amp;#34;
 return 0
 fi
 fi
 
 # Get fresh token
 entra-auth-cli get-token -p &amp;#34;$profile&amp;#34; | tee &amp;#34;$TOKEN_CACHE&amp;#34;
 chmod 600 &amp;#34;$TOKEN_CACHE&amp;#34;
}

# Use it
TOKEN=$(get_token &amp;#34;my-profile&amp;#34;)
curl -H &amp;#34;Authorization: Bearer $TOKEN&amp;#34; https://api.example.com&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="error-handling"&gt;Error Handling &lt;a href="#error-handling" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Implement robust error handling with retries.&lt;/p&gt;</description></item><item><title>PowerShell Scripting</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/powershell-scripts/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/powershell-scripts/</guid><description>&lt;h1 id="powershell-scripting"&gt;PowerShell Scripting &lt;a href="#powershell-scripting" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to integrate Entra Auth Cli with PowerShell for Windows automation and Azure management.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="basic-token-retrieval"&gt;Basic Token Retrieval &lt;a href="#basic-token-retrieval" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;


 
 
 

 
 
 
 

 

 &lt;div class="prism-codeblock "&gt;
 &lt;pre id="ab7dafc" class="language-powershell "&gt;
 &lt;code&gt;# Get token
$token = entra-auth-cli get-token -p my-profile

# Use with Invoke-RestMethod
$headers = @{
 &amp;#34;Authorization&amp;#34; = &amp;#34;Bearer $token&amp;#34;
 &amp;#34;Content-Type&amp;#34; = &amp;#34;application/json&amp;#34;
}

$response = Invoke-RestMethod `
 -Uri &amp;#34;https://graph.microsoft.com/v1.0/me&amp;#34; `
 -Headers $headers `
 -Method Get

$response | ConvertTo-Json&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="token-caching"&gt;Token Caching &lt;a href="#token-caching" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Implement token caching for better performance.&lt;/p&gt;</description></item><item><title>Security Hardening</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/security-hardening/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/security-hardening/</guid><description>&lt;h1 id="security-hardening"&gt;Security Hardening &lt;a href="#security-hardening" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to secure your Entra Auth Cli deployments for production environments.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="secure-token-storage"&gt;Secure Token Storage &lt;a href="#secure-token-storage" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="use-temporary-files-with-restricted-permissions"&gt;Use Temporary Files with Restricted Permissions &lt;a href="#use-temporary-files-with-restricted-permissions" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="5ea8f32" class="language-bash line-numbers"&gt;
 &lt;code&gt;#!/bin/bash
set -euo pipefail

# Use secure temp file
TOKEN_FILE=$(mktemp)
trap &amp;#34;rm -f $TOKEN_FILE&amp;#34; EXIT

# Get token with restricted permissions
entra-auth-cli get-token -p my-profile &amp;gt; &amp;#34;$TOKEN_FILE&amp;#34;
chmod 600 &amp;#34;$TOKEN_FILE&amp;#34;

# Use token
TOKEN=$(cat &amp;#34;$TOKEN_FILE&amp;#34;)
curl -H &amp;#34;Authorization: Bearer $TOKEN&amp;#34; https://api.example.com

# File automatically deleted on exit&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;h3 id="never-log-tokens"&gt;Never Log Tokens &lt;a href="#never-log-tokens" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="1c52acd" class="language-bash line-numbers"&gt;
 &lt;code&gt;# Bad: Token in logs
echo &amp;#34;Token: $TOKEN&amp;#34;
logger &amp;#34;Using token: $TOKEN&amp;#34;

# Good: Redact sensitive data
echo &amp;#34;Token acquired successfully&amp;#34;
logger &amp;#34;Authentication completed&amp;#34;&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="profile-separation"&gt;Profile Separation &lt;a href="#profile-separation" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="environment-specific-profiles"&gt;Environment-Specific Profiles &lt;a href="#environment-specific-profiles" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Create separate profiles for each environment:&lt;/p&gt;</description></item><item><title>Common Patterns</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/common-patterns/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/common-patterns/</guid><description>&lt;h1 id="common-patterns"&gt;Common Patterns &lt;a href="#common-patterns" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Frequently used patterns and techniques for working with Entra Auth Cli.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="pattern-api-rate-limiting"&gt;Pattern: API Rate Limiting &lt;a href="#pattern-api-rate-limiting" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Handle API rate limiting with exponential backoff.&lt;/p&gt;



 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="7f07754" class="language-bash line-numbers"&gt;
 &lt;code&gt;#!/bin/bash

call_api_with_rate_limit() {
 local url=$1
 local token=$2
 local max_retries=5
 local retry=0
 
 while [ $retry -lt $max_retries ]; do
 response=$(curl -s -w &amp;#34;\n%{http_code}&amp;#34; \
 -H &amp;#34;Authorization: Bearer $token&amp;#34; \
 &amp;#34;$url&amp;#34;)
 
 http_code=$(echo &amp;#34;$response&amp;#34; | tail -n1)
 body=$(echo &amp;#34;$response&amp;#34; | sed &amp;#39;$d&amp;#39;)
 
 if [ &amp;#34;$http_code&amp;#34; = &amp;#34;200&amp;#34; ]; then
 echo &amp;#34;$body&amp;#34;
 return 0
 elif [ &amp;#34;$http_code&amp;#34; = &amp;#34;429&amp;#34; ]; then
 # Rate limited, wait and retry
 wait_time=$(( 2 ** retry ))
 echo &amp;#34;Rate limited, waiting $wait_time seconds...&amp;#34; &amp;gt;&amp;amp;2
 sleep $wait_time
 retry=$((retry &amp;#43; 1))
 else
 echo &amp;#34;Error: HTTP $http_code&amp;#34; &amp;gt;&amp;amp;2
 echo &amp;#34;$body&amp;#34; &amp;gt;&amp;amp;2
 return 1
 fi
 done
 
 echo &amp;#34;Max retries exceeded&amp;#34; &amp;gt;&amp;amp;2
 return 1
}

# Usage
TOKEN=$(entra-auth-cli get-token -p my-profile )
call_api_with_rate_limit &amp;#34;https://graph.microsoft.com/v1.0/users&amp;#34; &amp;#34;$TOKEN&amp;#34;&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="pattern-parallel-api-calls"&gt;Pattern: Parallel API Calls &lt;a href="#pattern-parallel-api-calls" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Make multiple API calls concurrently for better performance.&lt;/p&gt;</description></item><item><title>Service Principal Authentication</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/service-principals/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/service-principals/</guid><description>&lt;h1 id="service-principal-authentication"&gt;Service Principal Authentication &lt;a href="#service-principal-authentication" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to use service principals (app registrations) for non-interactive authentication with Entra Auth Cli.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="overview"&gt;Overview &lt;a href="#overview" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Service principals are ideal for:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Automated scripts&lt;/strong&gt; - No user interaction required&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CI/CD pipelines&lt;/strong&gt; - Secure authentication in build processes&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Background services&lt;/strong&gt; - Long-running applications&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Server-to-server&lt;/strong&gt; - API-to-API authentication&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Authentication methods:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Client secrets (shared secrets)&lt;/li&gt;
&lt;li&gt;Certificates (more secure)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="prerequisites"&gt;Prerequisites &lt;a href="#prerequisites" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="create-app-registration"&gt;Create App Registration &lt;a href="#create-app-registration" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;Go to &lt;a href="https://portal.azure.com" rel="external" target="_blank"&gt;Azure Portal&lt;svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path fill="currentColor" d="M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z"/&gt;&lt;/svg&gt;&lt;/a&gt; → &lt;strong&gt;Entra ID&lt;/strong&gt; → &lt;strong&gt;App registrations&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;New registration&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Enter a name: &lt;code&gt;MyServicePrincipal&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Select &lt;strong&gt;Accounts in this organizational directory only&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;Register&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="grant-api-permissions"&gt;Grant API Permissions &lt;a href="#grant-api-permissions" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;In your app registration, go to &lt;strong&gt;API permissions&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;Add a permission&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Select &lt;strong&gt;Microsoft Graph&lt;/strong&gt; (or your API)&lt;/li&gt;
&lt;li&gt;Choose &lt;strong&gt;Application permissions&lt;/strong&gt; (not Delegated)&lt;/li&gt;
&lt;li&gt;Select required permissions (e.g., &lt;code&gt;User.Read.All&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;Grant admin consent&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="client-secret-authentication"&gt;Client Secret Authentication &lt;a href="#client-secret-authentication" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="step-1-create-client-secret"&gt;Step 1: Create Client Secret &lt;a href="#step-1-create-client-secret" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;In your app registration:&lt;/p&gt;</description></item><item><title>Custom APIs</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/custom-apis/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/custom-apis/</guid><description>&lt;h1 id="custom-apis"&gt;Custom APIs &lt;a href="#custom-apis" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to use Entra Auth Cli to authenticate and call your own custom APIs protected by Microsoft Entra ID.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="overview"&gt;Overview &lt;a href="#overview" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Entra Auth Cli can generate tokens for any API protected by Entra ID:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Internal APIs&lt;/strong&gt; - Your organization&amp;rsquo;s microservices&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Partner APIs&lt;/strong&gt; - Third-party services&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Multi-tenant APIs&lt;/strong&gt; - APIs serving multiple organizations&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Authentication scenarios:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Service-to-service (client credentials)&lt;/li&gt;
&lt;li&gt;User-delegated (on-behalf-of)&lt;/li&gt;
&lt;li&gt;API chaining (downstream APIs)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="prerequisites"&gt;Prerequisites &lt;a href="#prerequisites" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="register-your-api-in-azure"&gt;Register Your API in Azure &lt;a href="#register-your-api-in-azure" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;Go to &lt;a href="https://portal.azure.com" rel="external" target="_blank"&gt;Azure Portal&lt;svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path fill="currentColor" d="M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z"/&gt;&lt;/svg&gt;&lt;/a&gt; → &lt;strong&gt;Entra ID&lt;/strong&gt; → &lt;strong&gt;App registrations&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;New registration&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Enter name: &lt;code&gt;MyCustomAPI&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Select appropriate account types&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;Register&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="expose-api-scopes"&gt;Expose API Scopes &lt;a href="#expose-api-scopes" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;In your API app registration, go to &lt;strong&gt;Expose an API&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Set &lt;strong&gt;Application ID URI&lt;/strong&gt;: &lt;code&gt;api://your-api-id&lt;/code&gt; (or custom domain)&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;Add a scope&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Scope name&lt;/strong&gt;: &lt;code&gt;access_as_user&lt;/code&gt; (or custom)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Who can consent&lt;/strong&gt;: Admins and users&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Display name&lt;/strong&gt;: &amp;ldquo;Access My API&amp;rdquo;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Description&lt;/strong&gt;: &amp;ldquo;Allows the app to access My API&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;Add scope&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="register-client-app"&gt;Register Client App &lt;a href="#register-client-app" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;Create another app registration for the client&lt;/li&gt;
&lt;li&gt;Go to &lt;strong&gt;API permissions&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;Add a permission&lt;/strong&gt; → &lt;strong&gt;My APIs&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Select your API and the scope you created&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;Grant admin consent&lt;/strong&gt; (if required)&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="service-to-service-client-credentials"&gt;Service-to-Service (Client Credentials) &lt;a href="#service-to-service-client-credentials" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="api-configuration"&gt;API Configuration &lt;a href="#api-configuration" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Your API&amp;rsquo;s &lt;code&gt;appsettings.json&lt;/code&gt;:&lt;/p&gt;</description></item></channel></rss>