<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Recipes &amp; Examples on Entra Auth Cli Documentation</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/</link><description>Recent content in Recipes &amp; Examples on Entra Auth Cli Documentation</description><generator>Hugo</generator><language>en-us</language><atom:link href="https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/index.xml" rel="self" type="application/rss+xml"/><item><title>Microsoft Graph API</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/microsoft-graph/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/microsoft-graph/</guid><description>&lt;h1 id="microsoft-graph-api"&gt;Microsoft Graph API &lt;a href="#microsoft-graph-api" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to use Entra Auth Cli to authenticate and interact with Microsoft Graph API.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="overview"&gt;Overview &lt;a href="#overview" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Microsoft Graph is the unified API for Microsoft 365, providing access to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Users and groups&lt;/li&gt;
&lt;li&gt;Mail and calendars&lt;/li&gt;
&lt;li&gt;Files (OneDrive/SharePoint)&lt;/li&gt;
&lt;li&gt;Teams and collaboration&lt;/li&gt;
&lt;li&gt;Security and compliance&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Base URL:&lt;/strong&gt; &lt;code&gt;https://graph.microsoft.com/v1.0/&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="quick-start"&gt;Quick Start &lt;a href="#quick-start" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="setup-profile"&gt;Setup Profile &lt;a href="#setup-profile" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="35c905d" class="language-bash line-numbers"&gt;
 &lt;code&gt;entra-auth-cli config create
# Name: graph-readonly
# Client ID: &amp;lt;your-app-id&amp;gt;
# Tenant ID: &amp;lt;your-tenant-id&amp;gt;
# Scope: https://graph.microsoft.com/User.Read&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;h3 id="get-token-and-call-api"&gt;Get Token and Call API &lt;a href="#get-token-and-call-api" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="8d9ecab" class="language-bash line-numbers"&gt;
 &lt;code&gt;TOKEN=$(entra-auth-cli get-token -p graph-readonly --silent)
curl -H &amp;#34;Authorization: Bearer $TOKEN&amp;#34; \
 https://graph.microsoft.com/v1.0/me | jq&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="read-user-profile"&gt;Read User Profile &lt;a href="#read-user-profile" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Retrieve information about the authenticated user.&lt;/p&gt;</description></item><item><title>Azure Management API</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/azure-management/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/azure-management/</guid><description>&lt;h1 id="azure-management-api"&gt;Azure Management API &lt;a href="#azure-management-api" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to use Entra Auth Cli to authenticate and manage Azure resources.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="overview"&gt;Overview &lt;a href="#overview" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The Azure Management API provides programmatic access to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Subscriptions and resource groups&lt;/li&gt;
&lt;li&gt;Virtual machines and networking&lt;/li&gt;
&lt;li&gt;Storage accounts and databases&lt;/li&gt;
&lt;li&gt;Azure services configuration&lt;/li&gt;
&lt;li&gt;Resource provisioning and monitoring&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Base URL:&lt;/strong&gt; &lt;code&gt;https://management.azure.com/&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="quick-start"&gt;Quick Start &lt;a href="#quick-start" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="setup-profile"&gt;Setup Profile &lt;a href="#setup-profile" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="4cdb216" class="language-bash line-numbers"&gt;
 &lt;code&gt;entra-auth-cli config create
# Name: azure-mgmt
# Client ID: &amp;lt;your-app-id&amp;gt;
# Tenant ID: &amp;lt;your-tenant-id&amp;gt;
# Scope: https://management.azure.com/.default&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;h3 id="get-token-and-call-api"&gt;Get Token and Call API &lt;a href="#get-token-and-call-api" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="b9d01a4" class="language-bash line-numbers"&gt;
 &lt;code&gt;TOKEN=$(entra-auth-cli get-token -p azure-mgmt --silent)
curl -H &amp;#34;Authorization: Bearer $TOKEN&amp;#34; \
 &amp;#39;https://management.azure.com/subscriptions?api-version=2020-01-01&amp;#39; | jq&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="list-subscriptions"&gt;List Subscriptions &lt;a href="#list-subscriptions" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Retrieve all Azure subscriptions.&lt;/p&gt;</description></item><item><title>CI/CD Integration</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/cicd-integration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/cicd-integration/</guid><description>&lt;h1 id="cicd-integration"&gt;CI/CD Integration &lt;a href="#cicd-integration" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to integrate Entra Auth Cli into your CI/CD pipelines for automated authentication.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="github-actions"&gt;GitHub Actions &lt;a href="#github-actions" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="basic-example"&gt;Basic Example &lt;a href="#basic-example" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 

 

 &lt;div class="prism-codeblock "&gt;
 &lt;pre id="12101d7" class="language-yaml "&gt;
 &lt;code&gt;name: Deploy

on: [push]

jobs:
 deploy:
 runs-on: ubuntu-latest
 steps:
 - uses: actions/checkout@v3
 
 - name: Install Entra Auth Cli
 run: |
 dotnet tool install --global EntraTokenCli
 
 - name: Create Profile
 env:
 CLIENT_ID: ${{ secrets.AZURE_CLIENT_ID }}
 TENANT_ID: ${{ secrets.AZURE_TENANT_ID }}
 CLIENT_SECRET: ${{ secrets.AZURE_CLIENT_SECRET }}
 run: |
 # Create profile non-interactively
 cat &amp;gt; profile.json &amp;lt;&amp;lt;EOF
 {
 &amp;#34;name&amp;#34;: &amp;#34;cicd&amp;#34;,
 &amp;#34;clientId&amp;#34;: &amp;#34;$CLIENT_ID&amp;#34;,
 &amp;#34;tenantId&amp;#34;: &amp;#34;$TENANT_ID&amp;#34;,
 &amp;#34;scope&amp;#34;: &amp;#34;https://management.azure.com/.default&amp;#34;,
 &amp;#34;useClientSecret&amp;#34;: true
 }
 EOF
 entra-auth-cli config import -f profile.json
 
 # Store secret (implementation depends on tool capabilities)
 
 - name: Deploy to Azure
 run: |
 TOKEN=$(entra-auth-cli get-token -p cicd --silent)
 
 # Use token for deployment
 curl -X POST \
 -H &amp;#34;Authorization: Bearer $TOKEN&amp;#34; \
 -H &amp;#34;Content-Type: application/json&amp;#34; \
 -d @deployment.json \
 &amp;#34;https://management.azure.com/...&amp;#34;&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;h3 id="with-matrix-strategy"&gt;With Matrix Strategy &lt;a href="#with-matrix-strategy" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 

 

 &lt;div class="prism-codeblock "&gt;
 &lt;pre id="116437c" class="language-yaml "&gt;
 &lt;code&gt;name: Multi-Environment Deploy

on: [push]

jobs:
 deploy:
 runs-on: ubuntu-latest
 strategy:
 matrix:
 environment: [dev, staging, prod]
 steps:
 - uses: actions/checkout@v3
 
 - name: Setup Entra Auth Cli
 run: dotnet tool install --global EntraTokenCli
 
 - name: Deploy to ${{ matrix.environment }}
 env:
 CLIENT_ID: ${{ secrets[format(&amp;#39;{0}_CLIENT_ID&amp;#39;, matrix.environment)] }}
 TENANT_ID: ${{ secrets[format(&amp;#39;{0}_TENANT_ID&amp;#39;, matrix.environment)] }}
 CLIENT_SECRET: ${{ secrets[format(&amp;#39;{0}_CLIENT_SECRET&amp;#39;, matrix.environment)] }}
 run: |
 # Create environment-specific profile
 entra-auth-cli config create --name ${{ matrix.environment }} \
 --client-id &amp;#34;$CLIENT_ID&amp;#34; \
 --tenant-id &amp;#34;$TENANT_ID&amp;#34;
 
 TOKEN=$(entra-auth-cli get-token -p ${{ matrix.environment }} --silent)
 ./deploy.sh &amp;#34;$TOKEN&amp;#34; &amp;#34;${{ matrix.environment }}&amp;#34;&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="azure-pipelines"&gt;Azure Pipelines &lt;a href="#azure-pipelines" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="basic-example-1"&gt;Basic Example &lt;a href="#basic-example-1" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 

 

 &lt;div class="prism-codeblock "&gt;
 &lt;pre id="444f1bc" class="language-yaml "&gt;
 &lt;code&gt;trigger:
 - main

pool:
 vmImage: &amp;#39;ubuntu-latest&amp;#39;

steps:
- script: |
 dotnet tool install --global EntraTokenCli
 displayName: &amp;#39;Install Entra Auth Cli&amp;#39;

- task: AzureCLI@2
 inputs:
 azureSubscription: &amp;#39;MyServiceConnection&amp;#39;
 scriptType: &amp;#39;bash&amp;#39;
 scriptLocation: &amp;#39;inlineScript&amp;#39;
 inlineScript: |
 # Create profile
 entra-auth-cli config create --non-interactive \
 --name cicd \
 --client-id $(ClientId) \
 --tenant-id $(TenantId) \
 --client-secret $(ClientSecret) \
 --scope &amp;#34;https://management.azure.com/.default&amp;#34;
 
 # Get token
 TOKEN=$(entra-auth-cli get-token -p cicd --silent)
 
 # Deploy
 ./deploy.sh &amp;#34;$TOKEN&amp;#34;&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;h3 id="with-deployment-job"&gt;With Deployment Job &lt;a href="#with-deployment-job" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 

 

 &lt;div class="prism-codeblock "&gt;
 &lt;pre id="ce4f022" class="language-yaml "&gt;
 &lt;code&gt;trigger:
 - main

pool:
 vmImage: &amp;#39;ubuntu-latest&amp;#39;

stages:
- stage: Build
 jobs:
 - job: BuildJob
 steps:
 - script: dotnet build
 displayName: &amp;#39;Build Application&amp;#39;

- stage: Deploy
 dependsOn: Build
 jobs:
 - deployment: DeployJob
 environment: &amp;#39;production&amp;#39;
 strategy:
 runOnce:
 deploy:
 steps:
 - script: dotnet tool install --global EntraTokenCli
 displayName: &amp;#39;Install CLI&amp;#39;
 
 - script: |
 entra-auth-cli config create --name prod \
 --client-id $(ClientId) \
 --tenant-id $(TenantId)
 
 TOKEN=$(entra-auth-cli get-token -p prod --silent)
 ./deploy-to-production.sh &amp;#34;$TOKEN&amp;#34;
 displayName: &amp;#39;Deploy&amp;#39;&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="gitlab-ci"&gt;GitLab CI &lt;a href="#gitlab-ci" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;


 
 
 

 
 
 
 

 

 &lt;div class="prism-codeblock "&gt;
 &lt;pre id="9416df5" class="language-yaml "&gt;
 &lt;code&gt;stages:
 - deploy

deploy:
 stage: deploy
 image: mcr.microsoft.com/dotnet/sdk:8.0
 script:
 - dotnet tool install --global EntraTokenCli
 - export PATH=&amp;#34;$PATH:/root/.dotnet/tools&amp;#34;
 
 # Create profile
 - |
 cat &amp;gt; profile.json &amp;lt;&amp;lt;EOF
 {
 &amp;#34;name&amp;#34;: &amp;#34;gitlab-ci&amp;#34;,
 &amp;#34;clientId&amp;#34;: &amp;#34;$AZURE_CLIENT_ID&amp;#34;,
 &amp;#34;tenantId&amp;#34;: &amp;#34;$AZURE_TENANT_ID&amp;#34;,
 &amp;#34;scope&amp;#34;: &amp;#34;https://management.azure.com/.default&amp;#34;
 }
 EOF
 - entra-auth-cli config import -f profile.json
 
 # Deploy
 - TOKEN=$(entra-auth-cli get-token -p gitlab-ci --silent)
 - ./deploy.sh &amp;#34;$TOKEN&amp;#34;
 only:
 - main&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="jenkins"&gt;Jenkins &lt;a href="#jenkins" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;


 
 
 

 
 
 
 

 

 &lt;div class="prism-codeblock "&gt;
 &lt;pre id="dd2a732" class="language-groovy "&gt;
 &lt;code&gt;pipeline {
 agent any
 
 environment {
 CLIENT_ID = credentials(&amp;#39;azure-client-id&amp;#39;)
 TENANT_ID = credentials(&amp;#39;azure-tenant-id&amp;#39;)
 CLIENT_SECRET = credentials(&amp;#39;azure-client-secret&amp;#39;)
 }
 
 stages {
 stage(&amp;#39;Setup&amp;#39;) {
 steps {
 sh &amp;#39;dotnet tool install --global EntraTokenCli&amp;#39;
 }
 }
 
 stage(&amp;#39;Deploy&amp;#39;) {
 steps {
 sh &amp;#39;&amp;#39;&amp;#39;
 # Create profile
 entra-auth-cli config create --name jenkins \
 --client-id &amp;#34;$CLIENT_ID&amp;#34; \
 --tenant-id &amp;#34;$TENANT_ID&amp;#34;
 
 # Get token
 TOKEN=$(entra-auth-cli get-token -p jenkins --silent)
 
 # Deploy
 ./deploy.sh &amp;#34;$TOKEN&amp;#34;
 &amp;#39;&amp;#39;&amp;#39;
 }
 }
 }
}&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="best-practices"&gt;Best Practices &lt;a href="#best-practices" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="use-service-principals"&gt;Use Service Principals &lt;a href="#use-service-principals" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Create dedicated service principals for CI/CD:&lt;/p&gt;</description></item><item><title>Bash Scripting</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/bash-scripts/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/bash-scripts/</guid><description>&lt;h1 id="bash-scripting"&gt;Bash Scripting &lt;a href="#bash-scripting" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to use Entra Auth Cli in Bash scripts with proper error handling, caching, and best practices.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="token-caching"&gt;Token Caching &lt;a href="#token-caching" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Implement token caching to improve performance and reduce authentication requests.&lt;/p&gt;



 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="c060029" class="language-bash line-numbers"&gt;
 &lt;code&gt;#!/bin/bash
set -euo pipefail

TOKEN_CACHE=&amp;#34;/tmp/entra-auth-cli-token-cache.txt&amp;#34;
TOKEN_MAX_AGE=3000 # 50 minutes

get_token() {
 local profile=$1
 
 # Check if cached token exists and is valid
 if [ -f &amp;#34;$TOKEN_CACHE&amp;#34; ]; then
 if entra-auth-cli discover -f &amp;#34;$TOKEN_CACHE&amp;#34; &amp;amp;&amp;gt;/dev/null; then
 cat &amp;#34;$TOKEN_CACHE&amp;#34;
 return 0
 fi
 fi
 
 # Get fresh token
 entra-auth-cli get-token -p &amp;#34;$profile&amp;#34; --silent | tee &amp;#34;$TOKEN_CACHE&amp;#34;
 chmod 600 &amp;#34;$TOKEN_CACHE&amp;#34;
}

# Use it
TOKEN=$(get_token &amp;#34;my-profile&amp;#34;)
curl -H &amp;#34;Authorization: Bearer $TOKEN&amp;#34; https://api.example.com&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="error-handling"&gt;Error Handling &lt;a href="#error-handling" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Implement robust error handling with retries.&lt;/p&gt;</description></item><item><title>PowerShell Scripting</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/powershell-scripts/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/powershell-scripts/</guid><description>&lt;h1 id="powershell-scripting"&gt;PowerShell Scripting &lt;a href="#powershell-scripting" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to integrate Entra Auth Cli with PowerShell for Windows automation and Azure management.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="basic-token-retrieval"&gt;Basic Token Retrieval &lt;a href="#basic-token-retrieval" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;


 
 
 

 
 
 
 

 

 &lt;div class="prism-codeblock "&gt;
 &lt;pre id="70dd069" class="language-powershell "&gt;
 &lt;code&gt;# Get token
$token = entra-auth-cli get-token -p my-profile --silent

# Use with Invoke-RestMethod
$headers = @{
 &amp;#34;Authorization&amp;#34; = &amp;#34;Bearer $token&amp;#34;
 &amp;#34;Content-Type&amp;#34; = &amp;#34;application/json&amp;#34;
}

$response = Invoke-RestMethod `
 -Uri &amp;#34;https://graph.microsoft.com/v1.0/me&amp;#34; `
 -Headers $headers `
 -Method Get

$response | ConvertTo-Json&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="token-caching"&gt;Token Caching &lt;a href="#token-caching" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Implement token caching for better performance.&lt;/p&gt;</description></item><item><title>Security Hardening</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/security-hardening/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/security-hardening/</guid><description>&lt;h1 id="security-hardening"&gt;Security Hardening &lt;a href="#security-hardening" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Learn how to secure your Entra Auth Cli deployments for production environments.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="secure-token-storage"&gt;Secure Token Storage &lt;a href="#secure-token-storage" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="use-temporary-files-with-restricted-permissions"&gt;Use Temporary Files with Restricted Permissions &lt;a href="#use-temporary-files-with-restricted-permissions" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="0e6fee8" class="language-bash line-numbers"&gt;
 &lt;code&gt;#!/bin/bash
set -euo pipefail

# Use secure temp file
TOKEN_FILE=$(mktemp)
trap &amp;#34;rm -f $TOKEN_FILE&amp;#34; EXIT

# Get token with restricted permissions
entra-auth-cli get-token -p my-profile --silent &amp;gt; &amp;#34;$TOKEN_FILE&amp;#34;
chmod 600 &amp;#34;$TOKEN_FILE&amp;#34;

# Use token
TOKEN=$(cat &amp;#34;$TOKEN_FILE&amp;#34;)
curl -H &amp;#34;Authorization: Bearer $TOKEN&amp;#34; https://api.example.com

# File automatically deleted on exit&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;h3 id="never-log-tokens"&gt;Never Log Tokens &lt;a href="#never-log-tokens" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;


 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="1c52acd" class="language-bash line-numbers"&gt;
 &lt;code&gt;# Bad: Token in logs
echo &amp;#34;Token: $TOKEN&amp;#34;
logger &amp;#34;Using token: $TOKEN&amp;#34;

# Good: Redact sensitive data
echo &amp;#34;Token acquired successfully&amp;#34;
logger &amp;#34;Authentication completed&amp;#34;&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="profile-separation"&gt;Profile Separation &lt;a href="#profile-separation" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="environment-specific-profiles"&gt;Environment-Specific Profiles &lt;a href="#environment-specific-profiles" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Create separate profiles for each environment:&lt;/p&gt;</description></item><item><title>Common Patterns</title><link>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/common-patterns/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://entra-auth-cli-docs.garrardkitchen.com/docs/recipes/common-patterns/</guid><description>&lt;h1 id="common-patterns"&gt;Common Patterns &lt;a href="#common-patterns" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Frequently used patterns and techniques for working with Entra Auth Cli.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="pattern-api-rate-limiting"&gt;Pattern: API Rate Limiting &lt;a href="#pattern-api-rate-limiting" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Handle API rate limiting with exponential backoff.&lt;/p&gt;



 
 
 

 
 
 
 
 
 

 
 

 &lt;div class="prism-codeblock linenos"&gt;
 &lt;pre id="da60fad" class="language-bash line-numbers"&gt;
 &lt;code&gt;#!/bin/bash

call_api_with_rate_limit() {
 local url=$1
 local token=$2
 local max_retries=5
 local retry=0
 
 while [ $retry -lt $max_retries ]; do
 response=$(curl -s -w &amp;#34;\n%{http_code}&amp;#34; \
 -H &amp;#34;Authorization: Bearer $token&amp;#34; \
 &amp;#34;$url&amp;#34;)
 
 http_code=$(echo &amp;#34;$response&amp;#34; | tail -n1)
 body=$(echo &amp;#34;$response&amp;#34; | sed &amp;#39;$d&amp;#39;)
 
 if [ &amp;#34;$http_code&amp;#34; = &amp;#34;200&amp;#34; ]; then
 echo &amp;#34;$body&amp;#34;
 return 0
 elif [ &amp;#34;$http_code&amp;#34; = &amp;#34;429&amp;#34; ]; then
 # Rate limited, wait and retry
 wait_time=$(( 2 ** retry ))
 echo &amp;#34;Rate limited, waiting $wait_time seconds...&amp;#34; &amp;gt;&amp;amp;2
 sleep $wait_time
 retry=$((retry &amp;#43; 1))
 else
 echo &amp;#34;Error: HTTP $http_code&amp;#34; &amp;gt;&amp;amp;2
 echo &amp;#34;$body&amp;#34; &amp;gt;&amp;amp;2
 return 1
 fi
 done
 
 echo &amp;#34;Max retries exceeded&amp;#34; &amp;gt;&amp;amp;2
 return 1
}

# Usage
TOKEN=$(entra-auth-cli get-token -p my-profile --silent)
call_api_with_rate_limit &amp;#34;https://graph.microsoft.com/v1.0/users&amp;#34; &amp;#34;$TOKEN&amp;#34;&lt;/code&gt;
 &lt;/pre&gt;
 &lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="pattern-parallel-api-calls"&gt;Pattern: Parallel API Calls &lt;a href="#pattern-parallel-api-calls" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Make multiple API calls concurrently for better performance.&lt;/p&gt;</description></item></channel></rss>